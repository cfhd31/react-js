(this["webpackJsonpherrera-francisco"]=this["webpackJsonpherrera-francisco"]||[]).push([[0],{101:function(e,t,c){},102:function(e,t,c){},104:function(e,t,c){},105:function(e,t,c){},106:function(e,t,c){"use strict";c.r(t);var a=c(3),n=c.n(a),r=c(41),i=c.n(r),s=(c(36),c(55),c(37),function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,107)).then((function(t){var c=t.getCLS,a=t.getFID,n=t.getFCP,r=t.getLCP,i=t.getTTFB;c(e),a(e),n(e),r(e),i(e)}))}),o=c(10),d=c(12),l=c(19),j=c(13),b=c(23),u=(c(39),b.a.initializeApp({apiKey:"AIzaSyBrDtG6yCRdyBBAr8QHE02trZE455qSNzw",authDomain:"mercado-98f1b.firebaseapp.com",projectId:"mercado-98f1b",storageBucket:"mercado-98f1b.appspot.com",messagingSenderId:"751129474059",appId:"1:751129474059:web:085e90d8f292e32fca030e"}));function m(){return b.a.firestore(u)}c(40);var h=c(2);function O(e){var t=e.onAdd,c=e.stock,n=Object(a.useState)(1),r=Object(j.a)(n,2),i=r[0],s=r[1];return Object(h.jsxs)("div",{children:[Object(h.jsxs)("div",{className:" text-center",children:[Object(h.jsx)("button",{onClick:function(){i>1&&s(i-1)},className:"btn-secondary btnMasMenos alert-link",children:" - "}),Object(h.jsx)("span",{className:"espacio alert-link",children:i}),Object(h.jsx)("button",{onClick:function(){i<c&&s(i+1)},className:"btn-secondary btnMasMenos alert-link",children:" + "})]}),Object(h.jsx)("a",{href:"##",className:"btn btn-outline-primary",onClick:function(){return t(i)},children:"Agregar al carrito"})]})}var x=c(48),p=Object(a.createContext)(),f=function(){return Object(a.useContext)(p)},v=function(e){var t=e.children,c=Object(a.useState)([]),n=Object(j.a)(c,2),r=n[0],i=n[1],s=Object(a.useState)([0]),o=Object(j.a)(s,2),d=o[0],l=o[1],b=function(e){var t=r.filter((function(t){return t.prod.id!==e}));i(t)};Object(a.useEffect)((function(){l(r.reduce((function(e,t){return e+t.cantidad}),0))}),[b]);return Object(h.jsx)("div",{children:Object(h.jsx)(p.Provider,{value:{cartList:r,mostrarListado:function(){console.log(r)},agregarAlCarrito:function(e){var t=r.find((function(t){return t.prod.id===e.prod.id}));t?(t.cantidad=t.cantidad+e.cantidad,i(r)):i([].concat(Object(x.a)(r),[e])),l(r.reduce((function(e,t){return e+t.cantidad}),0))},borrarTodo:function(){i([])},borrarItem:b,contadorCarrito:d,precioTotal:function(){return r.reduce((function(e,t){return e+t.cantidad*t.prod.price}),0)}},children:t})})},g=function(e){var t=e.prod,c=Object(a.useState)(1),n=Object(j.a)(c,2),r=(n[0],n[1]),i=Object(a.useState)("input"),s=Object(j.a)(i,2),d=s[0],l=s[1],b=f().agregarAlCarrito,u=function(e){l("button"),r(e),b({prod:t,cantidad:e})};return t.stock<=0?Object(h.jsx)("div",{className:"catalogo",children:Object(h.jsxs)("div",{className:"react-reveal card efecto bg-dark",children:[Object(h.jsx)("h4",{className:"card-title",children:t.tipo}),Object(h.jsx)("img",{src:t.imagen,className:"card-img-top img-fluid",alt:"Foto de nave"}),Object(h.jsxs)("div",{className:"card-body",children:[Object(h.jsxs)("h5",{className:"card-title",children:["Nave: ",t.nombre]}),Object(h.jsxs)("div",{className:"card-text",children:[Object(h.jsxs)("p",{className:"text-secundary",children:[" ",Object(h.jsx)("strong",{children:"Precio:"})," ",t.precio,"M ISK"]}),Object(h.jsx)(o.b,{to:"/detalle/".concat(t.id),className:"text-primary",children:Object(h.jsx)("p",{children:"Ver detalle de la nave..."})}),Object(h.jsx)("div",{className:"fw-bold text-danger",children:Object(h.jsx)("h4",{children:"Sin Stock"})})]})]})]})}):Object(h.jsx)("div",{className:"catalogo",children:Object(h.jsxs)("div",{className:"react-reveal card efecto bg-dark",children:[Object(h.jsx)("h4",{className:"card-title",children:t.tipo}),Object(h.jsx)("img",{src:t.imagen,className:"card-img-top img-fluid",alt:"Foto de nave"}),Object(h.jsxs)("div",{className:"card-body",children:[Object(h.jsxs)("h5",{className:"card-title",children:["Nave: ",t.nombre]}),Object(h.jsxs)("div",{className:"card-text",children:[Object(h.jsxs)("p",{className:"text-secundary",children:[" ",Object(h.jsx)("strong",{children:"Precio:"})," ",t.precio,"M ISK"]}),Object(h.jsx)(o.b,{to:"/detalle/".concat(t.id),className:"text-primary",children:Object(h.jsx)("p",{children:"Ver detalle de la nave..."})}),Object(h.jsx)("div",{children:Object(h.jsx)("div",{onClick:function(){return u},children:"input"===d?Object(h.jsx)(O,{stock:t.stock,initial:"1",onAdd:u}):Object(h.jsx)(o.b,{to:"/cart",className:"pretext botonComprar",children:"Ir al Carrito"})})})]})]})]})})},N=Object(a.memo)((function(e){return e.product.map((function(e){return Object(h.jsx)(g,{prod:e},e.id)}))})),y=c(44),C=function(){return Object(h.jsx)(y.SolarSystemLoading,{})},k=(c(101),function(){var e=Object(a.useState)([]),t=Object(j.a)(e,2),c=t[0],n=t[1],r=Object(a.useState)(!0),i=Object(j.a)(r,2),s=i[0],o=i[1],b=Object(d.f)().id;return Object(a.useEffect)((function(){var e=m();b?e.collection("items").where("categoria","==",b).get().then((function(e){return n(e.docs.map((function(e){return Object(l.a)({id:e.id},e.data())})))})).catch((function(e){return console.log(e)})).finally((function(){return o(!1)})):e.collection("items").get().then((function(e){return n(e.docs.map((function(e){return Object(l.a)({id:e.id},e.data())})))})).catch((function(e){return console.log(e)})).finally((function(){return o(!1)}))}),[b]),s?Object(h.jsx)(C,{}):Object(h.jsx)("div",{className:" container",children:Object(h.jsx)("div",{className:"acomodar row justify-content-md-center",children:Object(h.jsx)(N,{product:c})})})}),S=(c(102),function(e){var t=e.prod,c=Object(a.useState)(1),n=Object(j.a)(c,2),r=(n[0],n[1]),i=Object(a.useState)("input"),s=Object(j.a)(i,2),d=s[0],l=s[1],b=f().agregarAlCarrito,u=function(e){l("button"),r(e),b({prod:t,cantidad:e})};return Object(h.jsx)("div",{children:Object(h.jsxs)("div",{className:"react-reveal card-detalle efecto bg-dark text-light",children:[Object(h.jsx)("h4",{className:"card-title text-danger font-weight-bold ",children:t.tipo}),Object(h.jsx)("img",{src:t.imagen,className:" card-img-top img-fluid",loading:"lazy",alt:"nave"}),Object(h.jsxs)("div",{className:"card-body",children:[Object(h.jsxs)("h5",{className:"card-title",children:[Object(h.jsx)("strong",{children:"Nave:"})," ",t.nombre]}),Object(h.jsxs)("p",{className:"card-text",children:[Object(h.jsx)("strong",{children:"Precio:"})," ",t.precio,"M ISK"]}),Object(h.jsxs)("p",{className:"card-text",children:[Object(h.jsx)("strong",{children:"Descripcion:"})," ",t.descripcion]}),Object(h.jsxs)("p",{className:"card-text",children:[Object(h.jsx)("strong",{children:"Stock:"})," ",t.stock]}),Object(h.jsx)("div",{children:Object(h.jsx)("div",{onClick:function(){return u},children:"input"===d?Object(h.jsx)(O,{stock:t.stock,initial:"1",onAdd:u}):Object(h.jsx)(o.b,{to:"/cart",className:"pretext botonComprar",children:"Ir al Carrito"})})})]})]})})}),I=function(){var e=Object(a.useState)({}),t=Object(j.a)(e,2),c=t[0],n=t[1],r=Object(d.f)().id,i=Object(a.useState)(!0),s=Object(j.a)(i,2),o=s[0],b=s[1];return Object(a.useEffect)((function(){var e=m();if(r)e.collection("items").doc(r).get().then((function(e){n(Object(l.a)({id:e.id},e.data()))})).catch((function(e){return console.log(e)})).finally((function(){return b(!1)}));else var t=e.collection("items").get().then((function(e){t.setProdIndiv(e.data())})).catch((function(e){return console.log(e)})).finally((function(){return b(!1)}))}),[r]),o?Object(h.jsx)("h5",{children:"Cargando el producto.."}):Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(S,{prod:c})})},A=c(47),w=function(e){Object(A.a)(e);var t=f().contadorCarrito;return Object(h.jsx)("div",{className:t>0?"mostrar":"ocultar",children:Object(h.jsxs)(o.b,{to:"/cart",children:[Object(h.jsx)("img",{src:"../assets/imagen/carrito.png",className:" imagenLogo2",alt:"imagen carrito"}),Object(h.jsxs)("span",{className:"badge",children:[t,"  "]}),Object(h.jsx)("i",{className:"fas fa-shopping-cart"})]})})},E=(c(103),function(){return Object(h.jsx)("div",{children:Object(h.jsx)("nav",{className:"navbar sticky-top navbar-light bg-light navbar-expand-lg menu menu--fondo",children:Object(h.jsxs)("div",{className:"container-fluid",children:[Object(h.jsx)("div",{className:"",children:Object(h.jsx)(o.b,{to:"/",children:Object(h.jsx)("img",{src:"../assets/imagen/eve0.png",className:" imagenLogo2",alt:"Logo Eve"})})}),Object(h.jsx)("button",{className:"navbar-toggler espacio","data-toggle":"collapse","data-bs-toggle":"collapse",type:"button","data-bs-target":"#collapse_target","aria-controls":"collapse_target","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(h.jsx)("span",{className:"navbar-toggler-icon"})}),Object(h.jsxs)("div",{className:"collapse navbar-collapse  menu--fondo ",id:"collapse_target",children:[Object(h.jsxs)("ul",{className:"navbar-nav",children:[Object(h.jsx)("li",{className:"nav-item menuEspacio",children:Object(h.jsx)(o.b,{to:"/",className:"menuMin",children:" INICIO"})}),Object(h.jsx)("li",{className:"nav-item menuEspacio",children:Object(h.jsx)(o.b,{to:"/categoria/Fragata",className:"menuMin",children:" FRAGATAS"})}),Object(h.jsx)("li",{className:"nav-item menuEspacio",children:Object(h.jsx)(o.b,{to:"/categoria/Destructor",className:"menuMin",children:" DESTRUCTORES"})}),Object(h.jsx)("li",{className:"nav-item menuEspacio",children:Object(h.jsx)(o.b,{to:"/categoria/Crucero",className:"menuMin",children:" CRUCEROS"})}),Object(h.jsx)("li",{className:"nav-item menuEspacio",children:Object(h.jsx)(o.b,{to:"/categoria/C. de Batalla",className:"menuMin",children:" C. DE BATALLA"})}),Object(h.jsx)("li",{className:"nav-item menuEspacio",children:Object(h.jsx)(o.b,{to:"/categoria/Acorazado",className:"menuMin",children:" ACORAZADOS"})})]}),Object(h.jsx)(w,{})]})]})})})}),M=c(27);function T(e){var t=f().borrarItem;return Object(h.jsxs)("tr",{className:"",children:[Object(h.jsx)("td",{children:Object(h.jsx)("img",{className:"imagen img-fluid",src:e.productos.prod.imagen,alt:e.productos.prod.tipo})}),Object(h.jsx)("th",{children:e.productos.prod.nombre}),Object(h.jsx)("td",{children:Object(h.jsxs)("p",{children:["x",e.productos.cantidad]})}),Object(h.jsx)("td",{children:Object(h.jsxs)("p",{children:[e.productos.prod.precio,"M Isk"]})}),Object(h.jsx)("td",{children:Object(h.jsxs)("p",{children:[e.productos.cantidad*e.productos.prod.precio,"M Isk"]})}),Object(h.jsx)("td",{children:Object(h.jsx)("i",{className:"bi bi-trash-fill",onClick:function(){return t(e.productos.prod.id)},children:Object(h.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-trash-fill",viewBox:"0 0 16 16",children:Object(h.jsx)("path",{d:"M2.5 1a1 1 0 0 0-1 1v1a1 1 0 0 0 1 1H3v9a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V4h.5a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H10a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1H2.5zm3 4a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 .5-.5zM8 5a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7A.5.5 0 0 1 8 5zm3 .5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 1 0z"})})})})]})}c(104);function L(){return Object(h.jsx)("div",{children:Object(h.jsxs)("div",{className:"toast",children:[Object(h.jsxs)("div",{className:"toast-header",children:[Object(h.jsx)("div",{className:"rounded mr-2",style:"height: 16px;width: 16px;background-color: red;"}),Object(h.jsx)("strong",{className:"mr-auto",children:"Gracias por su compra"}),Object(h.jsx)("small",{children:"Hace 2 segundos"}),Object(h.jsx)("button",{type:"button",className:"ml-2 mb-1 close","data-dismiss":"toast",children:Object(h.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),Object(h.jsx)("div",{className:"toast-body",children:"60"})]})})}function D(){var e=f(),t=e.cartList,c=e.borrarTodo,n=Object(a.useState)(""),r=Object(j.a)(n,2),i=(r[0],r[1]),s=Object(a.useState)(""),d=Object(j.a)(s,2),u=(d[0],d[1]),O=Object(a.useState)({name:"",phone:"",email:""}),x=Object(j.a)(O,2),p=x[0],v=x[1],g=t.reduce((function(e,t){return e+t.cantidad*t.prod.precio}),0);return!0!==!(null===t||void 0===t?void 0:t.length)?Object(h.jsx)("div",{className:"container",children:Object(h.jsxs)("div",{className:"row",children:[Object(h.jsx)("div",{className:"contenedorTabla flex-start ",children:Object(h.jsxs)("div",{className:"listaCarrito",children:[Object(h.jsx)("h2",{children:"Lista de compras"}),Object(h.jsxs)("table",{className:"react-reveal mb-5 table table-dark table-striped",children:[Object(h.jsx)("thead",{children:Object(h.jsxs)("tr",{className:"tabraTitulo table-dark",children:[Object(h.jsx)("th",{children:"  Foto  "}),Object(h.jsx)("th",{children:"  Nave  "}),Object(h.jsx)("th",{children:"  Cantidad  "}),Object(h.jsx)("th",{children:"  Precio por unidad  "}),Object(h.jsx)("th",{children:"   Subtotal    "}),Object(h.jsx)("th",{})]})}),Object(h.jsx)("tbody",{children:t.map((function(e){return Object(h.jsx)(T,{productos:e},e.prod.id)}))})]}),Object(h.jsxs)("div",{className:"",children:[Object(h.jsxs)("h6",{children:[" Importe total a pagar: ",g,"M Isk"]}),Object(h.jsx)("div",{className:"container",children:Object(h.jsxs)("div",{className:"d-flex justify-content-around",children:[Object(h.jsx)("div",{children:Object(h.jsx)(o.b,{to:"/",className:" ",children:Object(h.jsx)("button",{type:"submit",children:"Seguir comprando"})})}),Object(h.jsx)("div",{children:Object(h.jsx)("button",{type:"alerta",onClick:function(){return c()},children:"Vaciar Carrito"})})]})})]})]})}),Object(h.jsx)("div",{className:"formu",children:Object(h.jsxs)("form",{id:"contact",onSubmit:function(e){e.preventDefault();var a={};a.date=b.a.firestore.Timestamp.fromDate(new Date),a.buyer=p,a.total={precioTotal:g},a.state="Generado",a.items=t.map((function(e){var t=e.prod.id,c=e.prod.nombre,a=e.cantidad;return{id:t,nombre:c,precio:e.prod.precio*e.cantidad,cantidad:a}}));var n=m();n.collection("orders").add(a).then((function(e){return i(e.id)})).catch((function(e){return u(e)})).finally((function(){return v({name:"",phone:"",email:"",email2:"",comentario:""})}),Object(h.jsx)(L,{}),c());var r=n.collection("items").where(b.a.firestore.FieldPath.documentId(),"in",t.map((function(e){return e.prod.id}))),s=n.batch();r.get().then((function(e){e.docs.forEach((function(e){s.update(e.ref,{stock:e.data().stock-t.find((function(t){return t.prod.id===e.id})).cantidad})})),s.commit().catch((function(e){return console.log(e)}))}))},onChange:function(e){v(Object(l.a)(Object(l.a)({},p),{},Object(M.a)({},e.target.name,e.target.value)))},method:"post",children:[Object(h.jsx)("h3",{children:"Complete el formulario para finalizar compra"}),Object(h.jsx)("fieldset",{children:Object(h.jsx)("input",{placeholder:"Nick del Piloto",name:"name",type:"text",tabindex:"1",required:!0,autofocus:!0,value:p.name})}),Object(h.jsx)("fieldset",{children:Object(h.jsx)("input",{placeholder:"Numero de telefono",name:"phone",type:"tel",tabindex:"2",min:"6",max:"50",required:!0,value:p.phone})}),Object(h.jsx)("fieldset",{children:Object(h.jsx)("input",{placeholder:"Email",name:"email",type:"email",tabindex:"3",required:!0,value:p.email})}),Object(h.jsx)("fieldset",{children:Object(h.jsx)("input",{placeholder:"Vuelva a ingresar el Email",name:"email2",type:"email",tabindex:"4",required:!0,value:p.email2})}),Object(h.jsx)("fieldset",{children:Object(h.jsx)("textarea",{placeholder:"Algun comentario que nos quiera dejar?",name:"comentario",type:"text",tabindex:"5",value:p.comentario})}),Object(h.jsxs)("p",{children:[Object(h.jsx)("input",{type:"checkbox",name:"terminos",value:"1",required:!0}),"Acepta t\xe9rminos y condiciones"]}),Object(h.jsxs)("fieldset",{children:[Object(h.jsx)("button",{disabled:p.email!==p.email2,name:"Enviar",type:"submit",id:"contact-submit","data-submit":"...Sending",variant:"success",children:"Generar Orden"}),Object(h.jsxs)("p",{className:"copyright",children:["volver a",Object(h.jsx)(o.b,{to:"/",className:"waves-effect waves-light btn",children:Object(h.jsx)("h5",{children:"Inicio"})})]})]})]})})]})}):Object(h.jsxs)("div",{className:"container",children:[Object(h.jsx)("br",{}),Object(h.jsx)("h2",{children:"Tu carrito est\xe1 vac\xedo"}),Object(h.jsxs)(o.b,{to:"/",className:"waves-effect waves-light btn",children:[" ",Object(h.jsx)("a",{children:"Ir a Inicio "})]})]})}c(105);function F(){return Object(h.jsx)("div",{})}var z=function(){return Object(h.jsx)("div",{className:"App",children:Object(h.jsx)(v,{value:[],children:Object(h.jsxs)(o.a,{children:[Object(h.jsx)(F,{}),Object(h.jsx)(E,{}),Object(h.jsxs)(d.c,{children:[Object(h.jsx)(d.a,{exact:!0,path:"/",children:Object(h.jsx)(k,{})}),Object(h.jsx)(d.a,{path:"/categoria/:id",exact:!0,component:k}),Object(h.jsx)(d.a,{exact:!0,path:"/detalle/:id",component:I}),Object(h.jsx)(d.a,{exact:!0,path:"/cart",component:D})]})]})})})};i.a.render(Object(h.jsx)(n.a.StrictMode,{children:Object(h.jsx)(z,{})}),document.getElementById("root")),s()},37:function(e,t,c){},40:function(e,t,c){},55:function(e,t,c){}},[[106,1,2]]]);
//# sourceMappingURL=main.5ad9c42f.chunk.js.map